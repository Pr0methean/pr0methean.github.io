<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-K9NNCTT');</script><script async src='//pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js'></script><script>(adsbygoogle = window.adsbygoogle || []).push({google_ad_client: 'ca-pub-9922551172827508', enable_page_level_ads: true});</script>
<!-- Generated by javadoc -->
<title>Overview (BetterRandom 5.4.0 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="script.js"></script>
<script type="text/javascript" src="jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Overview (BetterRandom 5.4.0 API)";
        }
    }
    catch(err) {
    }
//-->
var pathtoroot = "./";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li>Use</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li><li><a href="/betterrandom-enterprise.html">For Enterprise</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<div class="header">
<h1 class="title">BetterRandom 5.4.0 API</h1>
</div>
<main role="main">
<div class="contentContainer">
<div class="block"><h1>More randomness. Less time. Still an instance of java.util.Random.</h1>
<p><a href="https://dev.azure.com/polymorpheus/BetterRandom/_build/latest?definitionId=2&amp;branchName=java7"><img src="https://dev.azure.com/polymorpheus/BetterRandom/_apis/build/status/BetterRandom-CI?branchName=master" alt="Build Status"/></a>
<a href="https://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22io.github.pr0methean.betterrandom%22%20AND%20a%3A%22BetterRandom%22"><img src="https://maven-badges.herokuapp.com/maven-central/io.github.pr0methean.betterrandom/BetterRandom/badge.svg" alt="Maven Central"/></a>
<a href="https://codecov.io/gh/Pr0methean/BetterRandom"><img src="https://codecov.io/gh/Pr0methean/BetterRandom/branch/master/graph/badge.svg" alt="Coverage"/></a>
<a href="https://www.codacy.com/app/Pr0methean/BetterRandom?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=Pr0methean/BetterRandom&amp;utm_campaign=Badge_Grade"><img src="https://api.codacy.com/project/badge/Grade/98a727e6ce3340598e9ae7757f3997fc" alt="Codacy Badge"/></a>
<a href="https://codebeat.co/projects/github-com-pr0methean-betterrandom-master"><img src="https://codebeat.co/badges/4339b354-590c-4871-b441-d694dc5a33ea" alt="codebeat badge"/></a>
<a href="https://bettercodehub.com/"><img src="https://bettercodehub.com/edge/badge/Pr0methean/BetterRandom?branch=master" alt="BCH compliance"/></a>
<a href="https://dependabot.com"><img src="https://api.dependabot.com/badges/status?host=github&amp;repo=Pr0methean/BetterRandom" alt="Dependabot Status"/></a>
<a href="https://app.fossa.io/projects/git%2Bgithub.com%2FPr0methean%2FBetterRandom?ref=badge_shield"><img src="https://app.fossa.io/api/projects/git%2Bgithub.com%2FPr0methean%2FBetterRandom.svg?type=shield" alt="FOSSA Status"/></a>
<a href="https://tidelift.com/subscription/pkg/maven-io-github-pr0methean-betterrandom-betterrandom-java7?utm_source=maven-io-github-pr0methean-betterrandom-betterrandom-java7&amp;utm_medium=referral&amp;utm_campaign=readme"><img src="https://tidelift.com/badges/package/maven/io.github.pr0methean.betterrandom:BetterRandom" alt="Lifted on Tidelift!"/></a>
<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p>BetterRandom is a library that helps you get the best performance and the best pseudorandomness from
your pseudorandom-number generators (PRNGs) and their seed sources. With it, you can:</p>
<ul>
<li>Wrap a <code>SplittableRandom</code>, with its improved speed and randomness-test performance, as a
<code>java.util.Random</code> so that methods like
<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#shuffle-java.util.List-java.util.Random-">Collections.shuffle(List&lt;&gt;,Random)</a>
can use it.
<ul>
<li>Have it automatically split when accessed from a new thread, so that it's even faster than a
<code>ThreadLocalRandom</code> but still safe to pass between threads.</li>
</ul>
</li>
<li>Wrap any <code>Supplier&lt;Random&gt;</code> to create a <code>Random</code> that's thread-local, but can be accessed just
like any other <code>Random</code>.</li>
<li>Use <code>AesCounterRandom</code>, a PRNG that's as secure as AES but much faster than <code>SecureRandom</code>.</li>
<li>Use any of 5 other great PRNG algorithms.</li>
<li>Use the above PRNGs anywhere you can use <code>java.util.Random</code>, because they're <em>subclasses</em> of
<code>java.util.Random</code>.</li>
<li>Be confident that your PRNGs will serialize and deserialize correctly.</li>
<li>Make the most of a custom PRNG algorithm by extending the abstract class <code>BaseRandom</code>.</li>
<li>Keep track of how much entropy your PRNG has left (bits of output versus bits of seed).</li>
<li>Automatically reseed your PRNGs whenever it's possible and beneficial, without blocking the
threads that use them while a seed is generated. The <code>RandomSeederThread</code> class does this and can
use any of the following seed sources:
<ul>
<li><code>/dev/random</code></li>
<li><a href="https://random.org">random.org</a></li>
<li>A <code>SecureRandom</code></li>
<li>Automatically choose the best of the above three with <code>DefaultSeedGenerator</code>.</li>
<li>Or roll your own by implementing just one method from the <code>SeedGenerator</code> interface.</li>
</ul>
</li>
</ul>
<h1>But java.util.Random is already fast enough for me!</h1>
<p>Yeah, but it's not <em>random</em> enough for you. Monte Carlo simulations have been known to
<a href="http://physics.ucsc.edu/~peter/115/randu.pdf">give misleading results</a> because of low-quality
PRNGs, and the implementation in <code>java.util.Random</code> is low-quality for two reasons:</p>
<ul>
<li>It's a linear congruential generator, a notoriously bad algorithm.</li>
<li>It only has 48 bits of internal state, so some <code>long</code> and <code>double</code> values are impossible to
generate. This means &quot;uniform distributions&quot; aren't uniform.</li>
</ul>
<p>Many standard tests of randomness amount to Monte Carlo simulations. And since widespread
pseudorandom number generators (PRNGs) pass most but not all such tests in standard suites such as
BigCrush and Dieharder, this suggests that <em>any</em> Monte Carlo simulation may turn out to be a test of
randomness, and to give misleading or untrustworthy results because of an unfortunate choice of
PRNG. There are two ways to minimize this risk, both of which BetterRandom can help with:</p>
<ul>
<li>Have several different PRNG algorithms available, all with the same interfaces, so that you can
swap one out and compare results.</li>
<li>Reseed PRNGs as often as possible, ideally with a seed source that continues to receive entropy
in parallel with your simulation.</li>
</ul>
<p>Don't take chances on randomness -- get it right with BetterRandom.</p>
<h1>Professional support</h1>
<h2>io.github.pr0methean.betterrandom:BetterRandom for enterprise</h2>
<p>Available as part of the Tidelift Subscription</p>
<p>The maintainers of io.github.pr0methean.betterrandom:BetterRandom and thousands of other packages are working with Tidelift to deliver commercial support and maintenance for the open source dependencies you use to build your applications. Save time, reduce risk, and improve code health, while paying the maintainers of the exact dependencies you use. <a href="https://tidelift.com/subscription/pkg/maven-io-github-pr0methean-betterrandom-betterrandom?utm_source=maven-io-github-pr0methean-betterrandom-betterrandom&amp;utm_medium=referral&amp;utm_campaign=enterprise&amp;utm_term=repo">Learn more.</a></p>
<h1>Your name or ad here!</h1>
<p>GitHub Sponsors can get mentions or ad space in this section of this page, both on
<a href="https://github.com/pr0methean/betterrandom">GitHub</a> and
<a href="https://pr0methean.github.io/betterrandom-java7/index.html">GitHub Pages</a>. You can even get a
mention in the Javadocs.
Get publicity from a library that was downloaded 13,854 times from Maven Central in October 2019.
Visit <a href="https://github.com/sponsors/Pr0methean">https://github.com/sponsors/Pr0methean</a> for details.</p>
<h1>Get it from MavenCentral</h1>
<ul>
<li>Get the latest version from
<a href="https://search.maven.org/#search%7Cga%7C1%7Ca%3A%22BetterRandom">Maven Central</a>.</li>
<li>Get dependency codes for Maven, Gradle, SBT, Ivy, Grape, Leiningen and Buildr from
<a href="https://mvnrepository.com/artifact/io.github.pr0methean.betterrandom">mvnrepository.com</a>
(more full-featured than Maven Central, but not always up-to-date).</li>
</ul>
<p>At both links, choose <strong>BetterRandom</strong> if using JDK 8+ and/or Android API 24+ at both compile-time
and runtime. Otherwise, choose <strong>BetterRandom-Java7</strong>.</p>
<h1>Quick start: picking a PRNG</h1>
<p>When you need an instance of <code>java.util.Random</code>, the recommended BetterRandom solution depends on how you're using it.</p>
<h2>It's for cryptography or gambling</h2>
<p>Only <code>AesCounterRandom</code> has cryptographically secure output.
Continuous reseeding is recommended if you don't need reproducible output.</p>
<ul>
<li>If you need reproducible output, use:
<pre><code>byte[] seed;
// Use an input seed if provided, or else:
if (seed == null) {
  seed = DEFAULT_SEED_GENERATOR.generateSeed(AesCounterRandom.MAX_SEED_LENGTH_BYTES);
  // Then output the seed
}
random = new AesCounterRandom(seed);
</code></pre>
</li>
<li>If you need multi-thread concurrency (incompatible with reproducibility), use:
<pre><code>new ReseedingThreadLocalRandomWrapper(AesCounterRandom::new, new RandomSeederThread(DEFAULT_SEED_GENERATOR))
</code></pre>
</li>
<li>Otherwise, use:
<pre><code>random = new AesCounterRandom();
new RandomSeederThread(DEFAULT_SEED_GENERATOR).add(random);
</code></pre>
</li>
</ul>
<h2>It's for a scientific simulation, competitive multiplayer game, or professional creative work</h2>
<p>For these purposes, the SplittableRandomAdapter family is fastest and passes the Dieharder pseudo-randomness tests.
Continuous reseeding is recommended if you don't need reproducible output.</p>
<ul>
<li>If you need reproducible output, use:
<pre><code>byte[] seed;
// Get an input seed if provided, then:
if (seed == null) {
  seed = DEFAULT_SEED_GENERATOR.generateSeed(Long.BYTES);
  // Then output the seed
}
random = new SingleThreadSplittableRandomAdapter(seed); 
</code></pre>
See <code>FifoFiller</code> for an example that reads the seed from an environment variable.</li>
<li>If you need multi-thread concurrency (incompatible with reproducibility), use:
<pre><code>new ReseedingSplittableRandomAdapter()
</code></pre>
</li>
<li>Otherwise, use:
<pre><code>random = new SingleThreadSplittableRandomAdapter();
new RandomSeederThread(DEFAULT_SEED_GENERATOR).add(random);  
</code></pre>
</li>
</ul>
<h2>It's for a single-player game, screensaver, playlist shuffle, etc.</h2>
<ul>
<li>If you need multi-thread concurrency <em>and</em> to be able to use a specific seed on each thread, use:
<pre><code>new SplittableRandomAdapter()
</code></pre>
</li>
<li>If you need to be able to use a specific seed, but you don't need concurrency, use:
<pre><code>new SingleThreadSplittableRandomAdapter()
</code></pre>
</li>
<li>Otherwise, use:
<pre><code>ThreadLocalRandom.current()
</code></pre>
(On OpenJDK 8 and Android API 24+, this is as good as a SplittableRandom.)</li>
</ul>
<h1>Simple tricks</h1>
<h2>Disable random.org unless explicitly specified</h2>
<pre><code>// Run this before creating any PRNG instances.
DefaultSeedGenerator.set(new SeedGeneratorPreferenceList(
      new BufferedSeedGenerator(DevRandomSeedGenerator.DEV_RANDOM_SEED_GENERATOR, 128),
      SecureRandomSeedGenerator.DEFAULT_INSTANCE));
</code></pre>
<h2>Specify the SecureRandom algorithm for seed generation</h2>
<pre><code>SecureRandom secureRandom = new SecureRandom(&quot;SHA1PRNG&quot;);
DefaultSeedGenerator.set(new SecureRandomSeedGenerator(secureRandom));
</code></pre>
<h2>Use a different seed generator for one specific PRNG</h2>
<pre><code>random = new SingleThreadSplittableRandomAdapter(SecureRandomSeedGenerator.DEFAULT_INSTANCE);
</code></pre>
<h2>Ridiculously long period</h2>
<pre><code>random = new Cmwc4096Random();
</code></pre>
<h1>Full examples</h1>
<h2>Cryptographic PRNG that uses Random.org for frequent reseeding</h2>
<pre lang="java"><code>import static io.github.pr0methean.betterrandom.seed.RandomDotOrgSeedGenerator.RANDOM_DOT_ORG_SEED_GENERATOR;

import io.github.pr0methean.betterrandom.seed.RandomSeederThread;
import io.github.pr0methean.betterrandom.seed.SeedException;
import io.github.pr0methean.betterrandom.util.BinaryUtils;

public class AesCounterRandomDemo {
  public static void main(String[] args) throws SeedException {
    AesCounterRandom random = new AesCounterRandom(RANDOM_DOT_ORG_SEED_GENERATOR);
    RandomSeederThread.add(SECURE_RANDOM_SEED_GENERATOR, random);
    byte[] randomBytes = new byte[32];
    for (int i=0; i&lt;20; i++) {
      random.nextBytes(randomBytes);
      System.out.format(&quot;Bytes: %s\n&quot;, BinaryUtils.convertBytesToHexString(randomBytes));
    }
  }
}
</code></pre>
<h2>ReseedingSplittableRandomAdapter for fast, high-quality, parallel duplicate-bridge dealing</h2>
<pre lang="java"><code>package io.github.pr0methean.betterrandom.prng.adapter;

import io.github.pr0methean.betterrandom.seed.SecureRandomSeedGenerator;
import io.github.pr0methean.betterrandom.seed.SeedException;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;
import java.util.concurrent.ScheduledThreadPoolExecutor;
import java.util.concurrent.TimeUnit;

public enum SplittableRandomAdapterDemo {
  ;

  private static final String[] VALUE_LABELS =
      {&quot;A&quot;, &quot;K&quot;, &quot;Q&quot;, &quot;J&quot;, &quot;10&quot;, &quot;9&quot;, &quot;8&quot;, &quot;7&quot;, &quot;6&quot;, &quot;5&quot;, &quot;4&quot;, &quot;3&quot;, &quot;2&quot;};
  private static final String[] SUIT_LABELS = {&quot;♥️&quot;, &quot;♣️&quot;, &quot;♦️&quot;, &quot;♠️&quot;};

  public static void main(final String[] args) throws SeedException, InterruptedException {
    final String[] cards = new String[52];
    int i = 0;
    for (final String suit : SUIT_LABELS) {
      for (final String value : VALUE_LABELS) {
        cards[i] = value + suit;
        i++;
      }
    }
    final ThreadLocal&lt;List&lt;String&gt;&gt; deckCopies =
        ThreadLocal.withInitial(() -&gt; Arrays.asList(cards.clone()));
    final ScheduledThreadPoolExecutor executor = new ScheduledThreadPoolExecutor(4);
    final SplittableRandomAdapter random =
        new SplittableRandomAdapter(SecureRandomSeedGenerator.DEFAULT_INSTANCE);
    for (i = 0; i &lt; 20; i++) {
      executor.submit(() -&gt; {
        final List&lt;String&gt; deck = deckCopies.get();
        Collections.shuffle(deck, random);
        System.out.format(&quot;North: %s%nEast: %s%nSouth: %s%nWest: %s%n%n&quot;,
            String.join(&quot;,&quot;, deck.subList(0, 13)), String.join(&quot;,&quot;, deck.subList(13, 26)),
            String.join(&quot;,&quot;, deck.subList(26, 39)), String.join(&quot;,&quot;, deck.subList(39, 52)));
      });
    }
    executor.shutdown();
    executor.awaitTermination(1, TimeUnit.MINUTES);
  }
}
</code></pre>
<h1>Full javadocs</h1>
<p>Javadocs for the latest snapshot, including both public and protected members (to support your
subclassing), are at <a href="https://pr0methean.github.io/">pr0methean.github.io</a>.</p>
<h1>Tested environments and supported versions</h1>
<p>BetterRandom has 2 branches from which releases have been cut: one for Java 8 and newer, and one for Java 7 -- including
Android API levels below 24. These produce the Maven artifacts named
<code>BetterRandom-Java7</code> and <code>BetterRandom</code> respectively.</p>
<h2>Java 8 (master branch)</h2>
<p>Beginning with version 3.1.2, continuous integration takes place on Azure Pipelines and includes
the following environments:</p>
<ul>
<li>Ubuntu: HotSpot 8,11,13; OpenJ9 8 and 12</li>
<li>OSX: HotSpot 8,11,13</li>
<li>Windows: HotSpot 8,11,12</li>
</ul>
<p>HotSpot is Azul Zulu. OpenJ9 is AdoptOpenJDK.</p>
<p>For versions up to 3.1.1, continuous integration took place in the following environments:</p>
<ul>
<li>Linux (on Travis): OpenJDK and Oracle JDK 8 and up</li>
<li>OS X (on Travis): OpenJDK 8 and up, Xcode 7.3 and up</li>
<li>Windows Server 2008 R2 (on Appveyor): Oracle JDK 8</li>
<li>Cygwin (on Appveyor): Oracle JDK 8</li>
<li>MinGW (on Appveyor): Oracle JDK 8</li>
</ul>
<p>CI on BSD or Android isn't likely any time soon, since no free providers of BSD CI seem to be
integrated with GitHub, and there seems to be no actively-maintained Android-app wrapper for TestNG
suites. However, Android API levels 24 and up (required as both source and target) should work.</p>
<h2>Java 7 (java7 branch)</h2>
<p>Since version 5.0.0, the Java 7 branch is no longer being maintained with backported improvements from the Java 8
branch. Exceptions will be made at the request of a Tidelift subscriber or a Gold or higher GitHub sponsor, or possibly
on other forms of paying demand. However, pull requests against this branch will still be considered and, if accepted,
released.</p>
<p>This branch was mainly intended to support Android API levels 19 through 23; support for other
environments is best-efforts.</p>
<p>Continuous integration takes place in OpenJDK 7 on Linux. Up to and including version 3.1.1, this was
done on Travis CI; beginning with 3.1.2, Azure Pipelines is used. Until the release of version 5.0.0, the Java 7 branch
was re-tested nightly.</p>
<h1>Alternative random number generators</h1>
<p>BetterRandom provides several pseudorandom number generators that are intended as drop-in
replacements for <code>java.util.Random</code>.</p>
<h2>Features common to all PRNGs in <code>betterrandom.prng</code></h2>
<ul>
<li>
<p>Reproducible: The <code>getSeed()</code> function retrieves a seed that can be passed into the constructor to
create another PRNG giving the same output. If any random numbers have been generated since
construction or a call to <code>setSeed(byte[])</code>, this may rewind the state to before that happened.</p>
</li>
<li>
<p>Serializable: All these PRNGs can be serialized and deserialized, copying their full internal
state.</p>
</li>
<li>
<p><code>setSeed(byte[])</code>: Reseed even if more than a <code>long</code> is needed to do so.
** Use <code>getNewSeedLength()</code> to get the recommended seed size.</p>
</li>
<li>
<p><code>entropyBits()</code>: Find out when the PRNG has output more random data than it has been seeded with,
and thus could benefit from being reseeded. Even when the PRNG is reseeded repeatedly without
being used, the entropy count won't ever go above the size of the PRNG's internal state.</p>
</li>
<li>
<p><code>withProbability(double)</code>: Get a boolean with <em>any</em> probability of being true, not just 50/50, and
the PRNG will still know you're only spending 1 bit of entropy. (Technically it may be <a href="https://en.wikipedia.org/wiki/Binary_entropy_function"><em>less</em>
than 1 bit</a>, but we don't implement
fractional-bit counting yet.)</p>
</li>
<li>
<p>Lockless <code>nextGaussian()</code>.</p>
</li>
<li>
<p><code>doubles</code>, <code>ints</code> and <code>longs</code> will return parallel streams whenever possible, whereas their
implementations in <code>Random</code> always return sequential streams.</p>
</li>
<li>
<p><code>gaussians()</code> and <code>gaussians(long streamSize)</code>: Get an endless or finite stream of
normally-distributed doubles.</p>
</li>
<li>
<p><code>setSeederThread(RandomSeederThread)</code>: Reseeds the PRNG whenever its entropy is spent, but only
as long as a seed generator can keep up. See below.</p>
</li>
</ul>
<h2>SplittableRandom adapters</h2>
<p>These classes use <code>java8.util.SplittableRandom</code> instances to implement the methods of <code>Random</code>,
despite that the two classes are unrelated and have slightly different method signatures. Several
adapters are available:</p>
<ul>
<li><code>SingleThreadSplittableRandomAdapter</code>: Simple and fast, but not thread-safe.</li>
<li><code>SplittableRandomAdapter</code>: Backed by a <code>ThreadLocal&lt;SplittableRandom&gt;</code>, whose instances of
<code>SplittableRandom</code> are all split from a single master.</li>
<li><code>ReseedingSplittableRandomAdapter</code>: Also backed by a <code>ThreadLocal&lt;SplittableRandom&gt;</code>, this
registers each thread's <code>SplittableRandom</code> instance with a <code>RandomSeederThread</code> (see below). This
is probably the best PRNG implementation that allows concurrent access from multiple threads.</li>
</ul>
<h2>Table of algorithms</h2>
<table>
<thead>
<tr>
<th>Class</th>
<th>Seed size (bytes)</th>
<th>Period (bits)</th>
<th>Speed</th>
<th>Speed with RandomSeederThread</th>
<th>Effect of <code>setSeed(long)</code></th>
<th><code>getSeed()</code> rewinds?</th>
<th>Algorithm author</th>
</tr>
</thead>
<tbody>
<tr>
<td>AesCounterRandom</td>
<td>16-48<!-- raw HTML omitted -->*<!-- raw HTML omitted --></td>
<td>2<!-- raw HTML omitted -->135<!-- raw HTML omitted --></td>
<td>Slow</td>
<td>Slow</td>
<td>Combines with existing seed</td>
<td>No</td>
<td><a href="http://csrc.nist.gov/groups/ST/toolkit/documents/rng/BlockCipherDRBGs.pdf">NIST</a></td>
</tr>
<tr>
<td>Cmwc4096Random</td>
<td>16384</td>
<td>2<!-- raw HTML omitted -->131104<!-- raw HTML omitted --></td>
<td>Medium</td>
<td>Very slow</td>
<td>Not supported</td>
<td>Yes</td>
<td><a href="http://school.anhb.uwa.edu.au/personalpages/kwessen/shared/Marsaglia03.html">George Marsaglia</a></td>
</tr>
<tr>
<td>MersenneTwisterRandom</td>
<td>16</td>
<td>2<!-- raw HTML omitted -->19937<!-- raw HTML omitted --></td>
<td>Medium</td>
<td>Medium</td>
<td>Not supported</td>
<td>Yes</td>
<td><a href="http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/emt.html">Makoto Matsumoto</a></td>
</tr>
<tr>
<td>XorShiftRandom</td>
<td>20</td>
<td>~2<!-- raw HTML omitted -->160<!-- raw HTML omitted --></td>
<td>Medium</td>
<td>Medium</td>
<td>Not supported</td>
<td>Yes</td>
<td><a href="http://www.jstatsoft.org/v08/i14/paper">George Marsaglia</a></td>
</tr>
<tr>
<td>SplittableRandomAdapter</td>
<td>8<!-- raw HTML omitted -->**<!-- raw HTML omitted --></td>
<td>2<!-- raw HTML omitted -->64<!-- raw HTML omitted --></td>
<td>Fast</td>
<td>Fast<!-- raw HTML omitted -->†<!-- raw HTML omitted --></td>
<td>Replaces existing seed (calling thread only)</td>
<td>Yes</td>
<td><a href="http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/SplittableRandom.java">Guy Steele and Doug Lea</a></td>
</tr>
<tr>
<td>Pcg64Random</td>
<td>8</td>
<td>2<!-- raw HTML omitted -->62<!-- raw HTML omitted --></td>
<td>Fast</td>
<td>Fast</td>
<td>Replaces existing seed</td>
<td>Yes</td>
<td><a href="http://www.pcg-random.org/">M. E. O'Neill</a></td>
</tr>
</tbody>
</table>
<p>Period assumes exactly 32 or 64 bits are consumed at a time, using <code>nextInt()</code>, <code>nextLong()</code>, <code>ints()</code> or <code>longs()</code>.</p>
<p><!-- raw HTML omitted -->*<!-- raw HTML omitted -->Seed sizes above 32 for AesCounterRandom require jurisdiction policy files that allow
192- and 256-bit AES seeds.</p>
<p><!-- raw HTML omitted -->**<!-- raw HTML omitted -->Can be reseeded independently on each thread, affecting only that thread.</p>
<p><!-- raw HTML omitted -->†<!-- raw HTML omitted -->Use specialized subclass ReseedingSplittableRandomAdapter.</p>
<h3>AesCounterRandom</h3>
<p>Retrieving the internal state of an <code>AesCounterRandom</code> instance from its output is considered
equivalent to breaking the AES cipher. Thus, this class should be able to replace <code>SecureRandom</code> in
many applications, such as generating session keys or erasing files on a magnetic disk or tape.</p>
<p>AesCounterRandom only generates a <em>permutation</em> of the space of 128-bit integers, so if it is used
to generate about 2<!-- raw HTML omitted -->64<!-- raw HTML omitted --> 128-bit strings without reseeding, its statistical properties will
begin to differ from those of <code>/dev/random</code> in that it won't have
<a href="https://en.wikipedia.org/wiki/Birthday_problem">generated the same string twice</a>. This could be
prevented by using a hash function rather than a reversible cipher, but the hash functions in
standard JVMs are less cryptographically secure than AES and won't run as fast on hardware featuring
AES-NI.</p>
<h1>Reseeding</h1>
<h2><code>SeedGenerator</code></h2>
<p>A <code>SeedGenerator</code> produces seeds for PRNGs. All the provided implementations are singletons, because
the seed sources cannot be parallelized. They include:</p>
<ul>
<li><code>DevRandomSeedGenerator.DEV_RANDOM_SEED_GENERATOR</code>: Works only on Unix-like systems; reads seeds
from <code>/dev/random</code>.</li>
<li><code>RandomDotOrgSeedGenerator.RANDOM_DOT_ORG_SEED_GENERATOR</code>: Connects to
<a href="https://www.random.org">random.org</a> to retrieve random numbers over HTTPS.
Random.org collects randomness from atmospheric noise using 9 radios, located at undisclosed
addresses in Dublin and Copenhagen and tuned to undisclosed AM/FM frequencies. (The secrecy is
intended to help prevent tampering with the output using a well-placed radio transmitter, and the
use of AM/FM helps ensure that any such tampering would cause illegal interference with broadcasts
and quickly attract regulatory attention.) Uses the legacy API by default, but can be configured
to use the JSON-RPC API.
<ul>
<li><code>RandomDotOrgSeedGenerator.RATE_LIMITED_ON_FAIL</code>: Avoids spamming Random.org or your router, by
instantly reporting failure for 10 seconds after every I/O or HTTP error.</li>
</ul>
</li>
<li><code>SecureRandomSeedGenerator.SECURE_RANDOM_SEED_GENERATOR</code>: Uses
<code>java.security.SecureRandom.generateSeed</code>. On Oracle and OpenJDK, this in turn uses
<code>sun.security.provider.SeedGenerator</code>; when <code>/dev/random</code> isn't available, that in turn uses the
timing of newly-launched threads as a source of randomness, relying on the unpredictable
interactions between different configurations of hardware and software and their workloads.</li>
<li><code>DefaultSeedGenerator.DEFAULT_SEED_GENERATOR</code>: Uses the best of the above three that is currently
available.</li>
</ul>
<h2>SimpleRandomSeeder</h2>
<p>This is a daemon thread that loops over all the <code>ByteArrayReseedableRandom</code> instances registered
with it and reseeds them. Those that implement <code>EntropyCountingRandom</code> are skipped when they still<br/>
have entropy left from a previous seeding. Example usage:</p>
<pre><code>// Obtain the seeder thread for this seed generator; launch it if it's not already running.
RandomSeederThread seederThread = RandomSeederThread.getInstance(DEFAULT_SEED_GENERATOR);

// Thread is now running, but is asleep if no PRNGs have already been added to it.

// Begin including myRandom in the loop, and wake up the thread.
seederThread.add(myRandom);

// Manually trigger reseeding ASAP (myRandom must be added first)
if (myRandom instanceof EntropyCountingRandom) {
  seederThread.asyncReseed(myRandom);
}

// Adding the same PRNG a second time has no effect
seederThread.add(myRandom);
</code></pre>
<h2>LegacyRandomSeeder</h2>
<p>This class is similar to <code>SimpleRandomSeeder</code>, but can handle any instance of <code>java.util.Random</code>.</p>
<h1>Folders</h1>
<ul>
<li><code>betterrandom/</code> contains BetterRandom's source code.</li>
<li><code>benchmark/</code> defines the JMH benchmarks as a separate Maven project.</li>
<li><code>FifoFiller/</code> is a simple utility used for Dieharder randomness tests, and is also a separate
Maven project.</li>
<li><code>etc/</code> contains scripts, templates used in <code>azure.yml</code>, and miscellaneous files used for
building and testing.</li>
<li><code>docs/</code> is a Git submodule used for publishing updates to this project's
<a href="https://pr0methean.github.io/betterrandom-java8/index.html">Javadoc on github.io</a>.</li>
</ul>
<h1>Credits</h1>
<p>The following classes are forked from <a href="https://github.com/dwdyer/uncommons-maths/">Uncommons Maths</a>:</p>
<ul>
<li>All of <code>betterrandom.prng</code> except <code>BaseRandom</code> and <code>betterrandom.prng.adapter</code></li>
<li>All of <code>betterrandom.seed</code> except <code>RandomSeederThread</code></li>
<li><code>BinaryUtils</code></li>
<li>Test classes corresponding to the above.</li>
</ul>
<h2>License</h2>
<p><a href="https://app.fossa.io/projects/git%2Bgithub.com%2FPr0methean%2FBetterRandom?ref=badge_large"><img src="https://app.fossa.io/api/projects/git%2Bgithub.com%2FPr0methean%2FBetterRandom.svg?type=large" alt="FOSSA Status"/></a></p></div>
</div>
<div class="contentContainer">
<table class="overviewSummary">
<caption><span>Packages</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Package</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor" id="i0">
<th class="colFirst" scope="row"><a href="io/github/pr0methean/betterrandom/package-summary.html">io.github.pr0methean.betterrandom</a></th>
<td class="colLast">
<div class="block">This root package contains interfaces for <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Random.html?is-external=true" title="class or interface in java.util" class="externalLink"><code>Random</code></a> subclasses with specific extra
 features.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<th class="colFirst" scope="row"><a href="io/github/pr0methean/betterrandom/prng/package-summary.html">io.github.pr0methean.betterrandom.prng</a></th>
<td class="colLast">
<div class="block">Subclasses of <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Random.html?is-external=true" title="class or interface in java.util" class="externalLink"><code>Random</code></a> using different random-number generation algorithms.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<th class="colFirst" scope="row"><a href="io/github/pr0methean/betterrandom/prng/adapter/package-summary.html">io.github.pr0methean.betterrandom.prng.adapter</a></th>
<td class="colLast">
<div class="block">Implementations of <a href="io/github/pr0methean/betterrandom/prng/BaseRandom.html" title="class in io.github.pr0methean.betterrandom.prng"><code>BaseRandom</code></a> that are backed by
 instances of <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/SplittableRandom.html?is-external=true" title="class or interface in java.util" class="externalLink"><code>SplittableRandom</code></a> or <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Random.html?is-external=true" title="class or interface in java.util" class="externalLink"><code>Random</code></a>, many of them wrapped
 in <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/ThreadLocal.html?is-external=true" title="class or interface in java.lang" class="externalLink"><code>ThreadLocal</code></a><code>&lt;?&gt;</code> to allow concurrent use of a shared instance by
 multiple threads.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<th class="colFirst" scope="row"><a href="io/github/pr0methean/betterrandom/seed/package-summary.html">io.github.pr0methean.betterrandom.seed</a></th>
<td class="colLast">
<div class="block">Tools to obtain and apply truly-random seeds for <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Random.html?is-external=true" title="class or interface in java.util" class="externalLink"><code>Random</code></a> implementations,
 especially those that also implement
 <a href="io/github/pr0methean/betterrandom/ByteArrayReseedableRandom.html" title="interface in io.github.pr0methean.betterrandom"><code>ByteArrayReseedableRandom</code></a>.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<th class="colFirst" scope="row"><a href="io/github/pr0methean/betterrandom/util/package-summary.html">io.github.pr0methean.betterrandom.util</a></th>
<td class="colLast">
<div class="block">Miscellaneous utilities.</div>
</td>
</tr>
</tbody>
</table>
</div>
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li>Use</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li><li><a href="/betterrandom-enterprise.html">For Enterprise</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>© 2020 Chris Hennick. Free to use under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a>. <a href="/privacy policy.html">Privacy Policy</a></small></p>
</footer>
</body>
</html>
